/* SafeClaw Dashboard â€” Luxury Minimalism + Brutalist Typography */
:root {
  --bg: #ffffff;
  --bg-secondary: #f9f8f6;
  --bg-tertiary: #f0edea;
  --text: #171e19;
  --text-secondary: #302b2f;
  --text-muted: #9f8d8b;
  --border: rgba(23, 30, 25, 0.12);
  --accent: #b7c6c2;
  --accent-hover: #a3b5b0;
  --accent-light: #d5f4f9;
  --success: #2d8a4e;
  --success-bg: #e8f5ed;
  --danger: #c0392b;
  --danger-bg: #fce8e6;
  --warning: #d97706;
  --warning-bg: #fef3e2;
  --card-shadow: 0 1px 3px rgba(23, 30, 25, 0.04), 0 4px 20px rgba(23, 30, 25, 0.03);
  --card-shadow-hover: 0 8px 40px rgba(23, 30, 25, 0.08);
  --radius: 12px;
  --radius-sm: 8px;
  --font: 'Plus Jakarta Sans', system-ui, -apple-system, "Segoe UI", sans-serif;
  --font-heading: 'Anton', system-ui, sans-serif;
  --font-mono: "SF Mono", "Fira Code", "Cascadia Code", monospace;
  --sage: #b7c6c2;
  --charcoal: #171e19;
  --beige: #d7c5b2;
  --cyan: #d5f4f9;
  --soft-blue: #bbe2f5;
  --taupe: #9f8d8b;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Auto mode: follows system preference */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --bg: #171e19;
    --bg-secondary: #1e2622;
    --bg-tertiary: #2a332e;
    --text: #e8eaef;
    --text-secondary: #b7c6c2;
    --text-muted: #7a8a85;
    --border: rgba(183, 198, 194, 0.15);
    --accent: #b7c6c2;
    --accent-hover: #d5f4f9;
    --accent-light: #2a332e;
    --success: #4ade80;
    --success-bg: rgba(74, 222, 128, 0.12);
    --danger: #f87171;
    --danger-bg: rgba(248, 113, 113, 0.12);
    --warning: #fbbf24;
    --warning-bg: rgba(251, 191, 36, 0.12);
    --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 4px 20px rgba(0, 0, 0, 0.08);
    --card-shadow-hover: 0 8px 40px rgba(0, 0, 0, 0.2);
    --sage: #b7c6c2;
    --charcoal: #171e19;
    --beige: #8a7d72;
    --cyan: #2a4a4e;
    --soft-blue: #2a3a44;
    --taupe: #7a8a85;
  }
}

/* Explicit dark mode override */
[data-theme="dark"] {
  --bg: #171e19;
  --bg-secondary: #1e2622;
  --bg-tertiary: #2a332e;
  --text: #e8eaef;
  --text-secondary: #b7c6c2;
  --text-muted: #7a8a85;
  --border: rgba(183, 198, 194, 0.15);
  --accent: #b7c6c2;
  --accent-hover: #d5f4f9;
  --accent-light: #2a332e;
  --success: #4ade80;
  --success-bg: rgba(74, 222, 128, 0.12);
  --danger: #f87171;
  --danger-bg: rgba(248, 113, 113, 0.12);
  --warning: #fbbf24;
  --warning-bg: rgba(251, 191, 36, 0.12);
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 4px 20px rgba(0, 0, 0, 0.08);
  --card-shadow-hover: 0 8px 40px rgba(0, 0, 0, 0.2);
  --sage: #b7c6c2;
  --charcoal: #171e19;
  --beige: #8a7d72;
  --cyan: #2a4a4e;
  --soft-blue: #2a3a44;
  --taupe: #7a8a85;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
  font-weight: 400;
}

a {
  color: var(--text);
  text-decoration: underline;
  text-decoration-color: var(--accent);
  text-underline-offset: 3px;
}

code {
  font-family: var(--font-mono);
  background: var(--bg-tertiary);
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 0.88em;
}

.hidden {
  display: none !important;
}

/* ---------- SVG Icon system ---------- */

.icon {
  width: 1em;
  height: 1em;
  display: inline-block;
  vertical-align: -0.125em;
  flex-shrink: 0;
}

.icon-brand {
  width: 24px;
  height: 24px;
  color: var(--accent);
}

.icon-hero {
  width: 48px;
  height: 48px;
  color: var(--accent);
}

.icon-tour {
  width: 22px;
  height: 22px;
  color: var(--accent);
}

.icon-empty {
  width: 36px;
  height: 36px;
  color: var(--text-muted);
}

/* ---------- Floating ambient blurs ---------- */

body::before,
body::after {
  content: '';
  position: fixed;
  border-radius: 50%;
  filter: blur(120px);
  opacity: 0.35;
  pointer-events: none;
  z-index: -1;
}

body::before {
  width: 500px;
  height: 500px;
  background: var(--cyan);
  top: -100px;
  right: -100px;
}

body::after {
  width: 400px;
  height: 400px;
  background: var(--sage);
  bottom: -50px;
  left: -100px;
}

/* ---------- Status bar ---------- */

header#status-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 28px;
  background: var(--charcoal);
  color: #f3f4f6;
  border-bottom: 1px solid rgba(183, 198, 194, 0.1);
  backdrop-filter: blur(20px);
}

[data-theme="light"] header#status-bar {
  background: var(--charcoal);
  color: #f3f4f6;
}

.status-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.status-left .icon-brand {
  color: var(--sage);
  width: 28px;
  height: 28px;
}

.status-left h1 {
  font-size: 20px;
  font-weight: 400;
  letter-spacing: 0.08em;
  color: #fff;
  font-family: var(--font-heading);
  text-transform: uppercase;
}

.status-dot {
  width: 9px;
  height: 9px;
  border-radius: 50%;
  background: var(--text-muted);
  display: inline-block;
}

.status-dot.ok {
  background: #22c55e;
}

.status-dot.error {
  background: #ef4444;
}

.status-right {
  font-size: 13px;
  color: #9ca3af;
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Theme toggle switch */
.theme-switch {
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
}
.theme-switch input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
}
.theme-slider {
  width: 52px;
  height: 28px;
  background: #374151;
  border-radius: 14px;
  border: 1px solid rgba(183, 198, 194, 0.2);
  position: relative;
  transition: background 0.4s var(--ease-out);
}
.theme-slider::before {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  background: var(--sage);
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: transform 0.4s var(--ease-out);
  z-index: 2;
}
.theme-switch input:checked + .theme-slider {
  background: #555;
}
.theme-switch input:checked + .theme-slider::before {
  transform: translateX(24px);
}
.theme-slider .icon {
  width: 14px;
  height: 14px;
  position: absolute;
  top: 7px;
  z-index: 1;
}
.theme-slider .theme-icon-moon {
  left: 7px;
  color: #e2e8f0;
}
.theme-slider .theme-icon-sun {
  right: 7px;
  color: #fbbf24;
}

#status-text {
  color: #d1d5db;
}

#profile-select {
  background: rgba(255, 255, 255, 0.06);
  color: #d1d5db;
  border: 1px solid rgba(183, 198, 194, 0.2);
  border-radius: var(--radius-sm);
  padding: 5px 10px;
  font-size: 13px;
  font-family: var(--font);
  transition: border-color 0.3s var(--ease-out);
}

#profile-select:hover {
  border-color: var(--sage);
}

/* ---------- Wizard ---------- */

.wizard-container {
  max-width: 520px;
  margin: 80px auto;
  padding: 0 24px;
}

.wizard-step {
  text-align: center;
}

.wizard-icon {
  margin-bottom: 16px;
  line-height: 1;
}

.wizard-icon .icon-hero {
  width: 56px;
  height: 56px;
}

.wizard-step h2 {
  font-size: 28px;
  font-weight: 400;
  margin-bottom: 12px;
  letter-spacing: 0.04em;
  font-family: var(--font-heading);
  text-transform: uppercase;
}

.wizard-step p {
  color: var(--text-secondary);
  margin-bottom: 8px;
  font-size: 15px;
  line-height: 1.7;
  font-weight: 300;
}

.wizard-help {
  text-align: left;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 14px 0;
}
.wizard-help ol {
  margin: 6px 0 0 0;
  padding-left: 20px;
  font-size: 14px;
  line-height: 1.8;
}
.wizard-help ol li {
  margin-bottom: 2px;
}
.wizard-help a {
  color: var(--accent);
  text-decoration: underline;
}

.muted {
  color: var(--text-muted);
  font-size: 13px;
}

.input-group {
  text-align: left;
  margin: 20px 0;
}

.input-group label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  margin-bottom: 6px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.input-group input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 15px;
  font-family: var(--font-mono);
  outline: none;
  transition: border-color 0.4s var(--ease-out), box-shadow 0.4s var(--ease-out);
}

.input-group input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(183, 198, 194, 0.2);
}

.wizard-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 24px;
}

.setup-summary {
  text-align: left;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 14px 18px;
  margin: 16px 0;
  font-size: 13px;
  color: var(--text-secondary);
}

.setup-summary div {
  padding: 2px 0;
}

/* ---------- Provider cards ---------- */

.provider-cards {
  display: flex;
  gap: 16px;
  justify-content: center;
  margin: 24px 0;
}

.provider-card {
  flex: 1;
  max-width: 200px;
  padding: 24px 16px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg);
  cursor: pointer;
  text-align: center;
  transition: all 0.5s var(--ease-out);
  font-family: var(--font);
}

.provider-card:hover {
  border-color: var(--accent);
  box-shadow: var(--card-shadow-hover);
  transform: translateY(-2px);
}

.provider-card.selected {
  border-color: var(--accent);
  background: var(--accent-light);
  box-shadow: 0 0 0 2px var(--accent);
}

.provider-card-name {
  font-size: 18px;
  font-weight: 600;
  color: var(--text);
}

.provider-card-org {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.provider-card-desc {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.4;
  font-weight: 300;
}

/* ---------- Buttons ---------- */

.btn {
  padding: 10px 22px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  color: var(--text);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.4s var(--ease-out);
  font-family: var(--font);
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--card-shadow-hover);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.btn-primary {
  background: var(--charcoal);
  border-color: var(--charcoal);
  color: #fff;
}

.btn-primary:hover {
  background: #2a332e;
  transform: translateY(-1px);
  box-shadow: var(--card-shadow-hover);
}

.btn-lg {
  padding: 14px 36px;
  font-size: 13px;
  font-weight: 400;
  border-radius: var(--radius);
  letter-spacing: 0.1em;
  font-family: var(--font-heading);
  text-transform: uppercase;
}

.btn-secondary {
  background: var(--bg-secondary);
  border-color: var(--border);
}

.btn-danger {
  background: var(--danger);
  border-color: var(--danger);
  color: #fff;
}

.btn-danger:hover {
  opacity: 0.9;
}

/* ---------- Dashboard grid ---------- */

.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: 24px;
  padding: 24px 0;
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 800px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}

/* ---------- Panels ---------- */

.panel {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px 28px;
  box-shadow: var(--card-shadow);
  transition: box-shadow 0.5s var(--ease-out);
}

.panel h2 {
  font-size: 11px;
  font-weight: 400;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  letter-spacing: 0.12em;
  font-family: var(--font-heading);
  text-transform: uppercase;
  color: var(--text-muted);
}

.panel-desc {
  font-size: 14px;
  color: var(--text-muted);
  margin-bottom: 16px;
  margin-top: -8px;
  line-height: 1.6;
  font-weight: 300;
}

.receipt-panel {
  max-width: 1200px;
  margin: 0 auto 20px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px 28px;
  box-shadow: var(--card-shadow);
}

/* ---------- Welcome banner ---------- */

.welcome-banner {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 56px 36px 44px;
  margin-bottom: 24px;
  text-align: center;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  overflow: hidden;
  box-shadow: var(--card-shadow);
}

.welcome-banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--sage), var(--cyan), var(--beige));
}

.welcome-icon {
  margin-bottom: 20px;
  line-height: 1;
}

.welcome-icon .icon-hero {
  width: 48px;
  height: 48px;
  color: var(--sage);
}

.welcome-content h2 {
  font-size: 32px;
  font-weight: 400;
  margin-bottom: 12px;
  letter-spacing: 0.04em;
  justify-content: center;
  font-family: var(--font-heading);
  color: var(--text);
  text-transform: uppercase;
}

.welcome-content p {
  color: var(--text-muted);
  font-size: 15px;
  max-width: 540px;
  margin: 0 auto 20px;
  line-height: 1.8;
  font-weight: 300;
}

.welcome-close {
  position: absolute;
  top: 18px;
  right: 18px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all 0.4s var(--ease-out);
  z-index: 1;
}
.welcome-close:hover {
  color: var(--text);
  background: var(--bg-tertiary);
  transform: scale(1.1);
}
.welcome-close .icon {
  width: 14px;
  height: 14px;
}

.help-btn {
  background: transparent;
  border: 1px solid rgba(183, 198, 194, 0.2);
  border-radius: 50%;
  width: 28px;
  height: 28px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #9ca3af;
  font-size: 13px;
  font-weight: 400;
  font-family: var(--font);
  transition: all 0.4s var(--ease-out);
}
.help-btn:hover {
  background: rgba(183, 198, 194, 0.15);
  color: #fff;
}

/* ---------- How it works flow ---------- */

.how-it-works {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin: 28px auto 0;
  max-width: 640px;
  flex-wrap: wrap;
}

.flow-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  min-width: 100px;
}

.flow-icon {
  line-height: 1;
  color: var(--text);
  background: var(--bg);
  width: 52px;
  height: 52px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border);
  box-shadow: var(--card-shadow);
  transition: transform 0.5s var(--ease-out);
}

.flow-icon:hover {
  transform: scale(1.1);
}

.flow-icon .icon {
  width: 22px;
  height: 22px;
}

.flow-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  margin-top: 4px;
}

.flow-arrow {
  color: var(--text-muted);
  flex-shrink: 0;
}

.flow-arrow .icon {
  width: 20px;
  height: 20px;
}

.flow-step-outcomes {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 6px;
  min-width: 160px;
}

.flow-outcome {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
}

.flow-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
  flex-shrink: 0;
}

.dot-allow {
  background: var(--success);
}

.dot-approval {
  background: var(--warning);
}

.dot-deny {
  background: var(--danger);
}

@media (max-width: 600px) {
  .how-it-works { flex-direction: column; gap: 12px; }
  .flow-arrow .icon { transform: rotate(90deg); }
  .flow-step-outcomes { align-items: center; }
}

.example-chips {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}

.chip {
  padding: 8px 20px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 100px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.4s var(--ease-out);
  font-family: var(--font);
}

.chip:hover {
  background: var(--accent-light);
  border-color: var(--accent);
  color: var(--text);
  transform: translateY(-1px);
}

/* ---------- Tab tour ---------- */

.tab-tour {
  margin-top: 32px;
  padding-top: 28px;
  border-top: 1px solid var(--border);
}

.tab-tour h3 {
  font-size: 11px;
  font-weight: 400;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.12em;
  margin: 0 0 16px;
  text-align: center;
  font-family: var(--font-heading);
}

.tab-tour-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  max-width: 640px;
  margin: 0 auto;
}

.tab-tour-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 16px 10px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.5s var(--ease-out);
  font-family: var(--font);
  text-align: center;
  color: var(--text);
}

.tab-tour-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--card-shadow-hover);
  border-color: var(--accent);
}

.tab-tour-icon,
.tab-tour-card .icon-tour {
  line-height: 1;
}

.tab-tour-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
}

.tab-tour-desc {
  font-size: 11px;
  color: var(--text-muted);
  line-height: 1.4;
  font-weight: 300;
}

@media (max-width: 600px) {
  .tab-tour-grid { grid-template-columns: repeat(2, 1fr); }
}

/* ---------- Task runner ---------- */

.task-input-area {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

#task-input {
  width: 100%;
  padding: 14px 18px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  font-size: 14px;
  resize: vertical;
  outline: none;
  min-height: 72px;
  line-height: 1.6;
  transition: border-color 0.4s var(--ease-out), box-shadow 0.4s var(--ease-out);
  font-weight: 300;
}

#task-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(183, 198, 194, 0.15);
}

#task-input::placeholder {
  color: var(--text-muted);
  font-weight: 300;
}

.task-actions {
  display: flex;
  gap: 8px;
}

/* ---------- Output area ---------- */

.output-area {
  margin-top: 16px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--card-shadow);
}

.output-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border);
  font-size: 11px;
  font-weight: 400;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-family: var(--font-heading);
}

.output-content {
  padding: 14px;
  font-family: var(--font);
  font-size: 14px;
  line-height: 1.7;
  max-height: 500px;
  overflow-y: auto;
  word-break: break-word;
  background: var(--bg);
  font-weight: 300;
}

/* ---------- Badges ---------- */

.badge {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 100px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.badge-count {
  background: var(--charcoal);
  color: #fff;
  min-width: 20px;
  text-align: center;
}

.badge-running {
  background: var(--warning-bg);
  color: var(--warning);
}

.badge-completed,
.badge-done {
  background: var(--success-bg);
  color: var(--success);
}

.badge-error,
.badge-stopped {
  background: var(--danger-bg);
  color: var(--danger);
}

.badge-pending,
.badge-require_approval {
  background: var(--warning-bg);
  color: var(--warning);
}

.badge-approved,
.badge-allowed,
.badge-allow {
  background: var(--success-bg);
  color: var(--success);
}

.badge-denied,
.badge-rejected,
.badge-deny {
  background: var(--danger-bg);
  color: var(--danger);
}

.badge-risk {
  background: rgba(159, 141, 139, 0.15);
  color: var(--taupe);
  font-size: 10px;
  padding: 2px 8px;
  border: 1px solid rgba(159, 141, 139, 0.3);
}

.risk-signals {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}

/* ---------- Cards ---------- */

.card {
  border: 1px solid var(--border);
  border-left: 3px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 16px 18px;
  margin-bottom: 10px;
  background: var(--bg);
  transition: all 0.5s var(--ease-out);
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--card-shadow-hover);
}

/* Approval cards get a warning left border */
.approval-panel .card {
  border-left-color: var(--warning);
}

/* Receipt cards colored by outcome */
.card-receipt-allow { border-left-color: var(--success); }
.card-receipt-deny { border-left-color: var(--danger); }
.card-receipt-pending { border-left-color: var(--warning); }

.card-title {
  font-weight: 600;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.card-resource {
  font-size: 12px;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  word-break: break-all;
}

.card-id {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
}

.card-actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.card-actions .btn {
  padding: 6px 16px;
  font-size: 12px;
}

.btn-approve {
  border-color: var(--success);
  color: #fff;
  background: var(--success);
}

.btn-approve:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.btn-reject {
  border-color: var(--danger);
  color: #fff;
  background: var(--danger);
}

.btn-reject:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* ---------- Tool call & approval blocks in output ---------- */

.tool-call-block {
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  margin: 6px 0;
  font-size: 12px;
}

.tool-call-block .tool-name {
  font-weight: 600;
  color: var(--accent-hover);
}

.approval-waiting {
  background: var(--warning-bg);
  border: 1px solid var(--warning);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  margin: 6px 0;
  font-size: 12px;
  color: var(--warning);
  font-weight: 600;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* ---------- Empty state ---------- */

.empty-state {
  text-align: center;
  padding: 36px 20px;
  color: var(--text-muted);
  font-size: 14px;
  line-height: 1.7;
  font-weight: 300;
}

.empty-icon {
  margin-bottom: 10px;
  opacity: 0.4;
  line-height: 1;
}

/* ---------- Scrollbar ---------- */

.output-content::-webkit-scrollbar {
  width: 4px;
}

.output-content::-webkit-scrollbar-track {
  background: transparent;
}

.output-content::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 4px;
}

/* ---------- Tab navigation ---------- */

.dashboard-tabs {
  display: flex;
  gap: 2px;
  padding: 0 28px;
  border-bottom: 1px solid var(--border);
  background: var(--bg);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.dashboard-tabs::-webkit-scrollbar {
  height: 0;
}

.tab-btn {
  padding: 14px 18px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border-radius: 0;
  border-bottom: 2px solid transparent;
  transition: all 0.4s var(--ease-out);
  font-family: var(--font);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 6px;
}

.tab-btn .icon {
  width: 16px;
  height: 16px;
}

.tab-btn:hover {
  color: var(--text);
}

.tab-btn.active {
  color: var(--text);
  border-bottom-color: var(--charcoal);
  font-weight: 600;
}

.tab-panel {
  padding: 28px;
  max-width: 1200px;
  margin: 0 auto;
}

/* ---------- Audit table ---------- */

.audit-filters { display: flex; gap: 10px; margin-bottom: 16px; align-items: center; flex-wrap: wrap; }
.audit-filters select {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 13px;
  font-family: var(--font);
  transition: border-color 0.3s var(--ease-out);
}
.audit-filters select:focus {
  border-color: var(--accent);
}

.audit-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.audit-table th { text-align: left; padding: 12px 8px; border-bottom: 1px solid var(--border); font-weight: 400; color: var(--text-muted); text-transform: uppercase; font-size: 11px; letter-spacing: 0.08em; font-family: var(--font-heading); }
.audit-table td { padding: 10px 8px; border-bottom: 1px solid var(--border); }
.audit-table tbody tr { transition: background 0.3s var(--ease-out); }
.audit-table tbody tr:hover { background: var(--bg-tertiary); }
.audit-resource { font-family: var(--font-mono); font-size: 12px; max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ---------- History layout ---------- */

.history-layout { display: grid; grid-template-columns: 300px 1fr; gap: 24px; }
.history-sidebar { max-height: 600px; overflow-y: auto; }
.history-card { cursor: pointer; padding: 14px 16px; border-bottom: 1px solid var(--border); transition: all 0.3s var(--ease-out); }
.history-card:hover { background: var(--bg-tertiary); }
.card-title { font-size: 13px; font-weight: 500; margin-bottom: 4px; }
.card-meta { font-size: 12px; color: var(--text-secondary); }
.card-actions { margin-top: 6px; }

.session-meta { margin-bottom: 16px; }
.session-meta div { padding: 4px 0; font-size: 13px; }
.session-transcript { max-height: 400px; overflow-y: auto; border-top: 1px solid var(--border); padding-top: 12px; }
.session-transcript h3, .session-transcript h4 { font-size: 13px; margin: 12px 0 6px; color: var(--text-secondary); }
.session-text { font-family: var(--font-mono); font-size: 12px; white-space: pre-wrap; padding: 2px 0; }
.tool-name { font-weight: 600; color: var(--accent-hover); }

/* ---------- Policy editor ---------- */

.policy-header { display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 12px; }
.policy-actions { display: flex; gap: 8px; align-items: center; }
.policy-actions select {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 13px;
  font-family: var(--font);
}
.policy-info { margin: 12px 0; font-size: 14px; display: flex; gap: 12px; align-items: center; }

.rule-card { padding: 14px 16px; margin-bottom: 8px; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--bg); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px; transition: all 0.4s var(--ease-out); }
.rule-card:hover { box-shadow: var(--card-shadow); }
.btn-small { font-size: 11px; padding: 4px 10px; }

.policy-add-rule { margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border); }
.policy-add-rule h3 { font-size: 14px; margin-bottom: 8px; font-weight: 600; }
.rule-form { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
.rule-form .input-group { margin: 0; }
.rule-form .btn { grid-column: 1 / -1; justify-self: start; }

/* ---------- Analytics ---------- */

.analytics-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
.analytics-controls { display: flex; gap: 8px; align-items: center; }
.analytics-controls select {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 13px;
  font-family: var(--font);
}

.analytics-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 16px 0; }
.stat-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  text-align: center;
  box-shadow: var(--card-shadow);
  transition: all 0.5s var(--ease-out);
}
.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--card-shadow-hover);
}
.stat-value { font-size: 36px; font-weight: 400; color: var(--text); letter-spacing: 0.02em; font-family: var(--font-heading); }
.stat-label { font-size: 11px; color: var(--text-muted); margin-top: 8px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; }

.bar-chart { margin: 16px 0; }
.bar-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
.bar-label { width: 90px; font-size: 12px; color: var(--text-secondary); text-align: right; flex-shrink: 0; }
.bar-track { flex: 1; height: 6px; background: var(--bg-tertiary); border-radius: 3px; overflow: hidden; }
.bar-fill { height: 100%; background: var(--sage); border-radius: 3px; transition: width 0.8s var(--ease-out); }
.bar-value { width: 80px; font-size: 12px; color: var(--text-secondary); font-family: var(--font-mono); }
.bar-fill-warning { background: var(--warning); }
.bar-fill-danger { background: var(--danger); }

.budget-bar-section { margin: 16px 0 8px; }
.budget-header { font-size: 13px; font-weight: 600; margin-bottom: 6px; display: flex; align-items: center; gap: 8px; }
.budget-bar-section .bar-track { height: 8px; }

/* ---------- Settings ---------- */

.settings-form { max-width: 600px; }
.settings-form .input-group { margin-bottom: 16px; }
.settings-form h3 { font-size: 11px; margin: 24px 0 10px; padding-top: 16px; border-top: 1px solid var(--border); font-weight: 400; font-family: var(--font-heading); text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); }
.checkbox-group { display: flex; flex-direction: column; gap: 6px; }
.checkbox-group label { font-size: 13px; display: flex; align-items: center; gap: 6px; }
.settings-form input[type="checkbox"] { width: 16px; height: 16px; }
.settings-form select { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--bg); color: var(--text); font-size: 14px; transition: border-color 0.3s var(--ease-out); }
.settings-form select:focus { border-color: var(--accent); }

@media (max-width: 800px) {
  .history-layout { grid-template-columns: 1fr; }
  .rule-form { grid-template-columns: 1fr; }
}

/* ---------- Footer ---------- */

.dashboard-footer {
  text-align: center;
  padding: 24px;
  font-size: 12px;
  color: var(--text-muted);
  border-top: 1px solid var(--border);
  margin-top: 32px;
  font-weight: 300;
}
.footer-brand { font-weight: 600; letter-spacing: 0.02em; }
.dashboard-footer a { color: var(--text-secondary); text-decoration: underline; text-decoration-color: var(--accent); text-underline-offset: 3px; }
.dashboard-footer a:hover { color: var(--text); }

/* ---------- Profile dropdown ---------- */

/* ---------- Task options ---------- */

.task-options {
  display: flex;
  gap: 16px;
  align-items: center;
  flex-wrap: wrap;
  font-size: 13px;
}

.task-option-group { display: flex; align-items: center; gap: 6px; }
.task-option-group label { font-size: 13px; color: var(--text-secondary); font-weight: 500; white-space: nowrap; }
.task-option-group select,
.task-option-group input[type="text"] {
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  color: var(--text);
  font-size: 13px;
  font-family: var(--font);
  transition: border-color 0.3s var(--ease-out);
}
.task-option-group input[type="checkbox"] { width: 14px; height: 14px; margin-right: 4px; }
.task-option-group input[type="text"] { width: 280px; }

/* ---------- Container mode info ---------- */

.container-info {
  margin-top: 4px;
  padding: 16px 20px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  animation: revealUp 0.5s var(--ease-out) both;
  position: relative;
}

.container-info-close {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 26px;
  height: 26px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all 0.4s var(--ease-out);
  padding: 0;
}
.container-info-close:hover {
  color: var(--text);
  background: var(--bg-secondary);
  transform: scale(1.1);
}
.container-info-close .icon {
  width: 12px;
  height: 12px;
}

.container-info-text {
  font-size: 13px;
  line-height: 1.7;
  color: var(--text-secondary);
  font-weight: 300;
  margin-bottom: 14px;
}

.container-info-text strong {
  font-weight: 600;
  color: var(--text);
  display: block;
  margin-bottom: 4px;
}

.container-info-text p {
  margin: 6px 0;
}

.container-info-text a {
  color: var(--text);
  text-decoration: underline;
  text-decoration-color: var(--accent);
  text-underline-offset: 3px;
  font-weight: 500;
}

.container-info .task-option-group {
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
}

.container-info .task-option-group label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--text-muted);
  font-weight: 600;
}

.container-info .task-option-group input[type="text"] {
  width: 100%;
}

.input-hint {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 300;
}

/* ---------- Form validation ---------- */

.field-error {
  border-color: var(--danger) !important;
  box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.15);
}
.field-error-msg {
  display: block;
  font-size: 12px;
  color: var(--danger);
  font-weight: 500;
  margin-top: 4px;
}

/* ---------- Audit verify banner ---------- */

.audit-verify-banner {
  padding: 12px 16px;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 12px;
}

.audit-verify-ok {
  background: var(--success-bg);
  color: var(--success);
  border: 1px solid var(--success);
}

.audit-verify-fail {
  background: var(--danger-bg);
  color: var(--danger);
  border: 1px solid var(--danger);
}

/* ---------- Config status ---------- */

.config-status {
  font-size: 12px;
  font-weight: 600;
}

/* ---------- Claw Clinic ---------- */

.clinic-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.clinic-summary {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
  font-size: 14px;
  font-weight: 600;
}

.clinic-stat-ok { color: var(--success); }
.clinic-stat-warn { color: var(--warning); }
.clinic-stat-fail { color: var(--danger); }

.clinic-check {
  display: flex;
  gap: 12px;
  padding: 14px 18px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  margin-bottom: 8px;
  background: var(--bg);
  align-items: flex-start;
  transition: all 0.4s var(--ease-out);
}

.clinic-check:hover {
  transform: translateY(-2px);
  box-shadow: var(--card-shadow-hover);
}

.clinic-icon { font-size: 18px; flex-shrink: 0; line-height: 1.2; }
.clinic-detail { flex: 1; min-width: 0; }
.clinic-name { font-weight: 600; font-size: 14px; }
.clinic-message { font-size: 13px; color: var(--text-secondary); font-family: var(--font-mono); }
.clinic-hint { font-size: 12px; color: var(--text-muted); margin-top: 4px; font-style: italic; }

.clinic-status-ok { border-left: 3px solid var(--success); }
.clinic-status-warn { border-left: 3px solid var(--warning); }
.clinic-status-fail { border-left: 3px solid var(--danger); }

/* ---------- Message bubbles ---------- */

.message-bubble { margin: 8px 0; padding: 14px 18px; border-radius: var(--radius); max-width: 90%; word-break: break-word; }
.user-bubble { background: var(--charcoal); color: #fff; margin-left: auto; border-bottom-right-radius: 4px; font-size: 14px; font-weight: 400; }
.agent-bubble { background: var(--bg-secondary); border: 1px solid var(--border); border-bottom-left-radius: 4px; }

.agent-bubble p { margin: 6px 0; }
.agent-bubble p:first-child { margin-top: 0; }
.agent-bubble p:last-child { margin-bottom: 0; }
.agent-bubble h3, .agent-bubble h4, .agent-bubble h5 { margin: 10px 0 4px; font-size: 14px; font-weight: 600; }
.agent-bubble ul { padding-left: 20px; margin: 6px 0; }
.agent-bubble li { margin: 2px 0; }
.agent-bubble a { color: var(--text); text-decoration: underline; text-decoration-color: var(--accent); }
.agent-bubble strong { font-weight: 600; }
.agent-bubble code { background: var(--bg-tertiary); padding: 2px 6px; border-radius: 4px; font-size: 0.9em; font-family: var(--font-mono); }

.code-block { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 12px 14px; margin: 8px 0; overflow-x: auto; font-family: var(--font-mono); font-size: 12px; line-height: 1.6; white-space: pre; }
.code-block code { background: none; padding: 0; font-size: inherit; }

.session-timestamp { font-size: 11px; color: var(--text-muted); margin-top: 4px; }

/* ---------- Follow-up input ---------- */

.followup-input-area { display: flex; gap: 8px; padding: 12px 14px; border-top: 1px solid var(--border); background: var(--bg-secondary); }
#followup-input { flex: 1; padding: 10px 14px; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--bg); color: var(--text); font-family: var(--font); font-size: 14px; outline: none; transition: border-color 0.4s var(--ease-out), box-shadow 0.4s var(--ease-out); }
#followup-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(183, 198, 194, 0.15); }

/* ---------- Task queue ---------- */

#task-queue { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); }
#task-queue h3 { font-size: 13px; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
.queue-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; border: 1px solid var(--border); border-radius: var(--radius-sm); margin-bottom: 6px; font-size: 13px; background: var(--bg); transition: all 0.3s var(--ease-out); }
.queue-item-task { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-right: 8px; }

/* ---------- Backup actions ---------- */

.backup-actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-bottom: 16px; }

/* ---------- Schedules ---------- */

.schedule-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
.schedule-item { display: flex; justify-content: space-between; align-items: center; padding: 16px 18px; border: 1px solid var(--border); border-radius: var(--radius-sm); margin-bottom: 8px; background: var(--bg); gap: 12px; transition: all 0.5s var(--ease-out); }
.schedule-item:hover { transform: translateY(-2px); box-shadow: var(--card-shadow-hover); }
.schedule-disabled { opacity: 0.55; }
.schedule-info { flex: 1; min-width: 0; }
.schedule-task { font-weight: 600; font-size: 14px; margin-bottom: 4px; }
.schedule-meta { font-size: 12px; color: var(--text-secondary); }
.schedule-cron { font-family: var(--font-mono); background: var(--bg-tertiary); padding: 2px 8px; border-radius: 4px; }
.schedule-actions { display: flex; gap: 8px; align-items: center; flex-shrink: 0; }
.toggle-label { font-size: 12px; display: flex; align-items: center; gap: 4px; cursor: pointer; }
.cron-help { font-size: 12px; color: var(--text-muted); margin: 4px 0 12px; font-weight: 300; }
.cron-help code { background: var(--bg-tertiary); padding: 1px 6px; border-radius: 4px; font-family: var(--font-mono); font-size: 11px; }

/* ---------- Policy simulate + versions ---------- */

.policy-simulate { margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border); }
.policy-simulate h3, .policy-versions h3 { margin-top: 0; }
#sim-result { margin-top: 12px; padding: 12px 16px; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--bg); font-size: 14px; }
.policy-versions { margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border); }

/* ---------- Swipe approvals ---------- */

.approval-item { position: relative; overflow: hidden; transition: transform 0.3s var(--ease-out); }
.approval-swipe-bg { position: absolute; top: 0; bottom: 0; width: 100%; display: flex; align-items: center; padding: 0 16px; font-weight: 600; font-size: 13px; z-index: 0; }
.swipe-approve-bg { left: 0; background: var(--success); color: #fff; justify-content: flex-start; }
.swipe-reject-bg { right: 0; background: var(--danger); color: #fff; justify-content: flex-end; }
.approval-item .card { position: relative; z-index: 1; background: var(--bg-secondary); }

/* ---------- Scroll reveal animation ---------- */

@keyframes revealUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.panel,
.welcome-banner,
.stat-card,
.receipt-panel {
  animation: revealUp 1s var(--ease-out) both;
}

/* Staggered animation delays for stat cards */
.analytics-cards .stat-card:nth-child(1) { animation-delay: 0ms; }
.analytics-cards .stat-card:nth-child(2) { animation-delay: 80ms; }
.analytics-cards .stat-card:nth-child(3) { animation-delay: 160ms; }

/* ---------- Mobile responsive ---------- */

@media (max-width: 600px) {
  #status-bar { flex-direction: column; gap: 8px; padding: 10px 16px; }
  .status-left h1 { font-size: 16px; }

  .dashboard-tabs { padding: 0 12px; gap: 0; }
  .tab-btn { padding: 10px 12px; font-size: 12px; }
  .tab-btn .icon { width: 14px; height: 14px; }

  .tab-panel { padding: 16px; }

  .panel { padding: 16px 18px; }
  .dashboard-grid { padding: 12px 0; gap: 12px; }

  #task-input { font-size: 16px; }

  .welcome-banner { padding: 32px 20px 28px; }
  .welcome-content h2 { font-size: 24px; }
  .example-chips { gap: 6px; }
  .chip { font-size: 12px; padding: 6px 14px; }

  .card { flex-direction: column; gap: 8px; }
  .card-actions { width: 100%; display: flex; gap: 8px; }
  .card-actions .btn { flex: 1; }

  .receipt-table, .audit-table { font-size: 12px; }

  .settings-form { max-width: 100%; }

  .dashboard-footer { padding: 12px; font-size: 11px; }

  .message-bubble { max-width: 95%; }

  .followup-input-area { flex-wrap: wrap; }

  .queue-item { font-size: 12px; }

  .backup-actions { flex-direction: column; }

  .schedule-item { flex-direction: column; align-items: flex-start; }
  .schedule-actions { width: 100%; justify-content: flex-end; }

  .analytics-cards { grid-template-columns: 1fr; }
}

/* Touch-friendly: larger tap targets */
@media (pointer: coarse) {
  .btn { min-height: 44px; }
  .tab-btn { min-height: 44px; }
  input[type="checkbox"] { width: 20px; height: 20px; }
  select { min-height: 44px; }
}
